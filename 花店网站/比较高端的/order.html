<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
<!-- 		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> -->
		<title>LULU花房(*￣▽￣*)ブ欢迎您</title>
		<link rel="stylesheet" href="./css/order.css" />
		<link rel="stylesheet" href="./css/bk.css" />
		<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
		<link rel="icon" href="./logo/flower.ico" >		
		<script type="text/javascript" src="./js/vue.js"></script>
		<script type="text/javascript" src="./js/cookie_utils.js" ></script>
		<script src="https://unpkg.com/element-ui/lib/index.js"></script>
	
	</head>
	<body>
		<div class = "bk" id = "container" v-cloak>
			<div id="particles-js">
				<div class = "main">
					<div class = "page">
				<div class="title">
					
					<div>	<!-- 导航栏 -->
						<ul>
							<li><a href="home.html">首页</a></li>
							<li><a href="purchase.html">购买</a></li>
							<li><a href="buyshow.html">买家秀</a></li>
							<li><a href="order.html">您的订单</a></li>
							<li><a href="login.html" @click="refor">退出登录</a></li>
						</ul>
					</div>
				</div>
				<el-dialog title="提示" :visible.sync="noLogin" width="30%" :before-close="backhome">
					<span>登陆后才能访问此页面，请先登录</span>
					<span slot="footer" class="dialog-footer">
						<el-button @click="backhome">取 消</el-button>
						<el-button type="primary" @click="backlogin">确 定</el-button>
					</span>
				</el-dialog>
				<el-dialog
				  title="提示"
				  :visible.sync="isback"
				  width="30%"
				  :before-close="backhome">
				  <span>退出登录后将清空您的登录信息，请您确认</span>
				  <span slot="footer" class="dialog-footer">
				    <el-button @click="backhome">取 消</el-button>
				    <el-button type="primary" @click="backlogin">确 定</el-button>
				  </span>
				</el-dialog>
					<div class="footer">Created by LULU @2021/仅供学习使用</div>
				</div>
	</div>
	</div>
	</div>
	<script>
	
	</script>
	
	<script>
	var vm = new Vue({
		el:"#container",
		data:{
			username:"",
			noLogin:true,
			noon:true,
			isback:false,
			
		},
		created:function(){
			//从cookie中获取token、username
			var token = getCookieValue("token");
			if(token!=null && token!=""){
				this.noLogin = false;
				this.username = getCookieValue('username');
			}else{
				this.noLogin = true; 						
			}
			},
		methods:{
		refor:function(){			// 点击退出登录后，不管是网页后退还是直接输入首页网址，都要重新登录，cookie直接被删除了
		if(vm.noLogin=false){		// 未登录直接不显示弹窗
			vm.isback = true;
		}else{
			vm.isback = false;
		}
			
		},	
		backhome:function(){
			vm.isback = false;
			window.location.href = "home.html";
		},
		backlogin:function(){
			vm.isback = false;
			clearCookie("token");
			clearCookie("username");
			window.location.href = "login.html";
		},
		
		},
	})
	
		</script>
		<script src="./js/particles.js"></script>
		<script src="./js/app.js"></script>
	</body>
</html>
