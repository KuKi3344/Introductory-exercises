<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=yes">
		<title>LULU花房(*￣▽￣*)ブ欢迎您</title>
		<link rel="stylesheet" href="./css/flower-4.css" />
		<link rel="stylesheet" href="./css/bk.css" />
		<link rel="stylesheet" href="./css/nologin.css" />
		<script type="text/javascript" src="./js/vue.js"></script>
		<script type="text/javascript" src="./js/cookie_utils.js" ></script>
		<script type="text/javascript" src="./js/jquery.js" ></script>
	
	</head>
	<body>
		<div :class = "{bk:noon,bknight:night}" id = "container">
			<div id="particles-js"></div>
			<button class = "night" @click="tonight">夜间模式</button>
				<div :class="{title:noon,nititle:night}"></div>
				<div class="symbol">LULU</div>
				<div class = "isLogin" v-cloak v-if="isLogin">
				<div class ="{lefttips:noon,nilefttips:night}">
				<div class ="{tip:noon,nitips:night}">
					{{username}},欢迎您
				</div>
				</div>	
			<div class = "buy">
		<div class = "card">
			<div class = "card1">
			<img class ="pic" src="https://tse2-mm.cn.bing.net/th/id/OIP-C.WyHvScjT2JV67pnFpsEZqwHaHa?w=206&h=206&c=7&r=0&o=5&dpr=1.25&pid=1.7">
			<span>&emsp;&emsp;&emsp;Rose<br/>&emsp;&emsp;&emsp;Price:80r<br/></span><div id = "sold">sold:5000+</div>
			<button class = "bt" >购买</button>
			</div>
			<div class = "card2">
			<img class = "pic" src="https://tse1-mm.cn.bing.net/th/id/R-C.905802caa47f9ac88f4a10742aa18adf?rik=7nUkKxI48kQjjA&riu=http%3a%2f%2fimg.11665.com%2fimg_p5%2fi2%2f2614286500%2fTB2OIe7bKuSBuNjy1XcXXcYjFXa_!!2614286500.jpg&ehk=guJVXm5NSPnmD2bWCMmGSZOneqng1Sm8Pb7mJgotbU4%3d&risl=&pid=ImgRaw&r=0">
			<span>&emsp;&emsp;&emsp;Lily<br/>&emsp;Price:100r<br/></span><div id = "sold">sold:2500+</div>
			<button class = "bt" >购买</button>
			</div>
			<div class = "card3">
			<img class="pic" src= "https://www.onecake.com/upload/20190506/4e8c672a5c2211abe777d3c2dd477e93.jpg">
			<span>&emsp;&emsp;Carnations<br/>&emsp;Price:75r<br/></span><div id = "sold">sold:3000+</div>
				<button class = "bt">购买</button>
			</div>
			<div class = "card4">
			<img class ="pic" src=" https://tse1-mm.cn.bing.net/th/id/R-C.a644b1b9c15b2e1109a4248aaa099cce?rik=HOw62oqNKheRBA&riu=http%3a%2f%2fimage.huahuibk.com%2fuploads%2f20190107%2f21%2f1546866645-bvgixyhzAX.jpg&ehk=8Es%2fcRyF3UxRBL7u6bGDpzOgI9VxsR77wQo4UtIb3ZU%3d&risl=&pid=ImgRaw&r=0">
			<span>&emsp;Balloon flower<br/>&emsp;Price:90r<br/></span><div id = "sold">sold:500+</div>
			<button class = "bt" >购买</button>
			</div>
			<div class= "card5">
			<img class = "pic" src="https://tse1-mm.cn.bing.net/th/id/R-C.13739366f14e3d84959f47258d896b02?rik=V%2f7O4Tc%2bb6LNDQ&riu=http%3a%2f%2fwww.168hua.com%2fphoto%2f241012390.jpg&ehk=zgPmuJPqzl9fIvURdSq%2fub%2bV2ticVW9CnhislktE020%3d&risl=&pid=ImgRaw&r=0">
			<span>&emsp;&emsp;Bouquet of stars<br/>&emsp;Price:50r<br/></span><div id = "sold">sold:2000+</div>
			<button class = "bt">购买</button>
			</div>
			<div class = "card6">
			<img class = "pic" src = "https://j.huazhile.com/XQ/24139040/D0A1B3FBBED5A_1.jpg">
			<span>&emsp;&emsp;Little Daisy<br/>&emsp;&emsp;Price:78r<br/></span><div id = "sold">sold:1000+</div>
			<button class = "bt">购买</button>
			</div>
			</div>
			</div>
		</div>
	<div class="nologin" v-cloak v-else></div>
	
		<div class = "footer">Created by LULU @2021.</div>
	</div>
	<script>
	var vm = new Vue({
		el:"#container",
		data:{
			username:"",
			img:"./img/head.png",
			isLogin:false,
			noon:true,
			night:false,
			
		},
		created:function(){
			//从cookie中获取token、username
			var token = getCookieValue("token");
			if(token!=null && token!=""){
				this.isLogin = true;
				this.username = getCookieValue('username');
			}
			var tonight = getCookieValue("tonight");	// 读取在别的页面是否夜间模式来决定此页面是否为夜间模式
			 if(tonight!=null && tonight!=""){
				 this.noon=false;
				 this.night=true;
			}else{
				this.noon=true;
				this.night=false;
			}
			},
		methods:{
		refor:function(){			// 点击退出登录后，不管是网页后退还是直接输入首页网址，都要重新登录，cookie直接被删除了
			alert('退出后，您需要重新登录才能继续使用部分功能，请确认');
			clearCookie("token");
			clearCookie("username");
			clearCookie("tonight");
		},	
		tonight:function(){
			if(vm.night){						// 因为监听器会随时监测night是否和tonight方向一致
				var space = "";					// 所以要先改变tonight的值再去改变night的值才能使night变化
				setCookieValue("tonight",space);	//不然night一变化就会被强制和tonight保持一致而恢复原来状态
				vm.night=false;							//就会产生不论怎么点击都无法改变的状况
				vm.noon=true;
			}else if(vm.noon){
				setCookieValue("tonight",vm.noon);
				vm.noon=false;
				vm.night=true;
		}
		
		},
		},
		watch: {		// 随时监听night是否和cookie里的tonight方向一致，避免因F5刷新而导致的数据缺失
						// 从而导致night和tonight的不同步性
		
		   night() {
			   var isnight = getCookieValue("tonight");
			  if (isnight!=null && isnight!=""){
				  this.noon = false;
				  this.night = true;
			  }else{
				  this.noon = true;
				  this.night = false;
			  }
		   }
		
		},
	})
	
		</script>
		<script src="./js/particles.js"></script>
		<script src="./js/app.js"></script>
		<script>$(".title").load("./index.html");</script>
		<script>$(".nititle").load("./index.html");</script>
		<script>$(".nologin").load("./nologin.html");</script>
	</body>
</html>
